\documentclass{amsart}
\usepackage{amssymb}
\usepackage[noadjust]{cite}
\usepackage{enumerate}
\usepackage{mathrsfs}
\usepackage{tikz}
\usepackage{tikz-cd}
\usepackage{wrapfig}
\usepackage{caption}
\usepackage[position=b]{subcaption}
\usepackage{hyperref}


\newtheorem{theorem}{Theorem}
\newtheorem{prop}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{cor}[theorem]{Corollary}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{question}[theorem]{Question}
\newtheorem{example}[theorem]{Example}
\newtheorem{defprop}[theorem]{Definition-Proposition}

\DeclareMathOperator{\Coh}{Coh}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\cExt}{\mathscr{E} \! \textit{xt}}
\DeclareMathOperator{\Gr}{Gr}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Ho}{H}
\newcommand{\cHom}{\mathcal{H} \textit{om}}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\Ob}{Ob}
\DeclareMathOperator{\Sch}{{\bf Sch}}
\DeclareMathOperator{\Sh}{Sh}
\DeclareMathOperator{\Sing}{Sing}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\Vect}{{\bf Vec}}
\DeclareMathOperator{\Zar}{Zar}

\renewcommand{\AA}{\mathcal{A}}
\newcommand{\BB}{\mathcal{B}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\CL}{\mathcal{C}}
\newcommand{\DD}{\mathcal{D}}
\newcommand{\EE}{\mathscr{E}}
\newcommand{\FF}{\mathscr{F}}
\newcommand{\GG}{\mathscr{G}}
\newcommand{\cH}{\mathscr{H}}
\newcommand{\HH}{\mathbb{H}}
\newcommand{\II}{\mathscr{I}}
\newcommand{\JJ}{\mathscr{J}}
\newcommand{\bL}{\textbf{L}}
\newcommand{\LL}{\mathcal{L}}
\newcommand{\OO}{\mathcal{O}}
\newcommand{\PP}{\mathbb{P}}
\newcommand{\qis}{\simeq_{qis}}
\newcommand{\qisf}{\simeq_{qis,filt}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\bR}{\textbf{R}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\otimesL}{\otimes^{\bf L}}

\newcommand*\xbar[1]{%
  \hbox{%
    \vbox{%
      \hrule height 0.5pt % The actual bar
      \kern0.5ex%         % Distance between bar and symbol
      \hbox{%
        \kern-0.1em%      % Shortening on the left side
        \ensuremath{#1}%
        \kern-0.1em%      % Shortening on the right side
      }%
    }%
  }%
} 

\newcommand{\tu}{\underline{2}}
\DeclareMathOperator{\red}{red}
\newcommand{\DB}{\underline{\Omega}}
\DeclareMathOperator{\tot}{tot}

\begin{document}
	
\section{Cubical Hyperresolutions}
\begin{prop}
	Suppose $\pi_\bullet : Y_\bullet \rightarrow X_\bullet$ is a cubical hyperresolution of the $I$-scheme $X_\bullet$, and $\xbar{X}_\bullet \rightarrow X_\bullet$ is a shape-embedding morphism of diagrams, an isomorphism on each component of $\xbar{X}_\bullet$.
	Then $Y_\bullet \times_{X_\bullet} \xbar{X}_\bullet \rightarrow \xbar{X}_\bullet$ is a cubical hyperresolution of $\xbar{X}_\bullet$.
\end{prop}
\begin{proof}
	Take the sequence of 2-resolutions which gives $\pi_\bullet$ as cubical hyperresolutions, then the fibered product of each of these remains a 2-resolution as closed immersions, birational maps, and fibered products are all preserved.
	Finally, the reduction of this sequence gives $Y_\bullet \times_{X_\bullet} \xbar{X}_\bullet$.
\end{proof}
	
\section{Grothendieck Topology}
\begin{defprop}
	For any diagram of schemes $X_\bullet$, define the Zariski site $\Zar(X_\bullet)$ to be the category of shape-embedding open immersions $U_\bullet \rightarrow X_\bullet$, with morphisms compatible shape-embedding open immersions $U_\bullet \rightarrow V_\bullet$.
	
	For each $U_\bullet$, a set of maps $\{U_{\bullet i} \rightarrow U_\bullet\}$ in the category is a covering if each component of $U_\bullet$, $U_\alpha$ is covered by the set of components $\{U_{\alpha i}\}$.
	These form a Grothendieck topology, and a morphism of the diagrams gives an associated morphism of the Zariski sites, and the category of sheaves over $X_\bullet$ is equivalent to the category of sheaves on $\Zar(X_\bullet)$, and each morphism of diagrams has an associated morphism of sites.
\end{defprop}
\begin{proof}
	An isomorphism is certainly a covering, as are refinements.
	Finally, a base change of a shape-preserving open immersion retains these properties and component-wise it is the base change of a covering in the usual topology, so this defines a topology.
	
	Define a functor $\Phi : \Sh(X_\bullet) \rightarrow \Sh(\Zar(X_\bullet))$ by $\Phi(\FF_\bullet)(U_\bullet) = \varprojlim  \FF_{\alpha}(U_\alpha)$, a limit ranging over the shape of $U_\bullet$.
	This functor is an equivalence, with $\Phi^{-1}(\GG)_\alpha = (U \mapsto \GG(U \hookrightarrow X_\bullet))$.
	
	For each $f_\bullet : X_\bullet \rightarrow Y_\bullet$ we can associate morphism of sites which takes $U_\bullet \hookrightarrow Y_\bullet$ to $U_\bullet \times_{Y_\bullet} X_\bullet \hookrightarrow X_\bullet$.
\end{proof}

\begin{defprop}[Tag 0408 from \cite{stacks}]
	A sheaf $\LL_\bullet$ on a diagram is called invertible if for each $U \in \Zar(X_\bullet)$, there is a covering $\{U_i \rightarrow U\}$ and isomorphisms $\OO_{X_\bullet/U_i} \xrightarrow{\sim} \LL_\bullet$.
	An invertible sheaf is equivariant (by a similar argument to II 7.3 from \cite{Lipman2009}), and if $\LL_\bullet^{-1} = \cHom(\LL_\bullet, \OO_{X_\bullet})$, then the natural map $\LL_\bullet \otimes \LL_\bullet^{-1} \rightarrow \OO_{X_\bullet}$ is an isomorphism.
	
	Equivalently, an invertible sheaf is an equivarant sheaf which is invertible on every component.
\end{defprop}

Note that this differs from the convention of ``$\FF_\bullet$ has property $P$ if each $\FF_\alpha$ does," in this case we need equivariance in order to take maps $X_\phi^* \LL_\beta \rightarrow \LL_\alpha$ and give a map from $X_\phi^* \LL_\beta^{-1}$ to $\LL_\alpha$.

\section{Quasi-coherentness}
	
\begin{lemma}
	\label{lem:affinecover}
	Let $I$ be a thin, finite category without loops and with an initial object.
	Then if $X$ is a quasi-compact $I$-scheme, there is a finite affine covering of $X$ in the Zariski site.
\end{lemma}

\begin{proof}
	First we note that the objects in $I$ can be partially-ordered such that each object only maps to the objects of larger order, that is, $\Ob I$ has a bijection with $\{0, \dots, N\}$ such that if there is a morphism $i \rightarrow j$, then $i \leq j$.
	The initial object must be 0 in this construction.
	
	Thus we can construct $X$ inductively as follows: let $X^0 = X_0$, and let $X^1$ be the full subdiagram of $X$ with only $X_0$ and $X_1$, etc., so that $X^n$ is obtained from $X^{n-1}$ by taking the diagram containing $X^{n-1}$, $X_n$, and all the maps $f_{n\alpha}:X_n \rightarrow X_\alpha$ out of $X_n$ in the diagram $X$, by construction these all map to objects in $X^{n-1}$.
	
	Construct $V_i^n$ as follows: for $X^0$ choose an open affine cover of $X_0$, and for $X_n$, for each $V_i^{n-1}$ choose an open affine cover $U_{ij}$ of $\cap_\alpha f_{n\alpha}^{-1}(V_{i\alpha})$ (here we take an empty intersection to be the entire space).
	Let $V_{ij}^n$ be the diagram $U_{ij} \xrightarrow{\{f_{n\alpha}\}_\alpha} V_i$.
	
	We wish to prove that for each $n$, this construction forms a cover as desired for $X^n$.
	This would follow by the construction and the following:
	
	Claim: For each $n$, $\cap_\alpha f_{n\alpha}^{-1}(V_{i\alpha})$ covers $X_n$.
	
	We prove this by induction.
	For $X_0$, the intersection the entire space, so this is true.
	In general, suppose $p \in X_n$.
	Let $\alpha_1, \dots, \alpha_m$ be the objects in $I$ which $n$ maps to, in their order.
	We must show that there is an element of $V_i^{n-1}$ which has $f_{\alpha_j}(p)$ in each $V_{i \alpha_j}^{n-1}$.
	
	There is a $V_{i_1}^{\alpha_1}$ containing $f_{\alpha_1}(p)$, by construction.
	Inducting on the $\alpha_i$'s, assume now that there is a $V_{i_{k-1}}^{\alpha_{k-1}}$ containing each of the $\{f_{\alpha_1}(p), \dots, f_{\alpha_{k-1}}(p)\}$.
	Then by the hypotheses, if $g_\beta$'s are the maps out of $X_{\alpha_k}$, $\cap_\beta g_{\beta}^{-1}(V_{i_{k-1}\beta})$ is a cover of $X_{\alpha_k}$, thus by construction there is a $V_{i_{k-1}j}^{\alpha_k}$ including $\{f_{\alpha_1}(p), \dots, f_{\alpha_{k}}(p)\}$.
\end{proof}

\begin{definition}
	Let $X_\bullet$ be a diagram of schemes, $\FF_\bullet$ and $\GG_\bullet$ two sheaves over $X_\bullet$.
	Define $\cHom_{X_\bullet}(\FF_\bullet, \GG_\bullet)$ as the sheaf-hom on the Zariski site, or equivalently as follows: for each $\alpha \in I$, and $U \subseteq X_\alpha$ open, let
	\[
		(\cHom_{X_\bullet}(\FF_\bullet, \GG_\bullet))_\alpha(U) = \Hom_{X_\bullet/U} ( i_U^* \FF_\bullet , i_U^* \GG_\bullet).
	\]
	This gives a sheaf on each $X_\alpha$.
	For $X_\phi : X_\alpha \rightarrow X_\beta$, $U \subseteq X_\beta$, there is a map $X_\bullet / X_\phi^{-1}(U) \rightarrow X_\bullet / U$ such that the $i$ maps commute, and putting this together gives maps $(\cHom_{X_\bullet}(\FF_\bullet, \GG_\bullet))_\beta(U) \rightarrow (\cHom_{X_\bullet}(\FF_\bullet, \GG_\bullet))_\alpha(X_\phi^{-1}(U))$ as needed.
\end{definition}

\begin{definition}
	A sheaf on $X_\bullet$ will be called (quasi-)coherent if each component is (quasi-)coherent.
	Note that this is not the same as being (quasi-)coherent as a sheaf on the Zariski site.
	As in II 7.3 of \cite{Lipman2009}, that is equivalent to this notion plus the following very strong condition:
	
	A sheaf $\FF_\bullet$ will be called equivariant if for each $X_\phi$ in the diagram, the map $X_\phi^* \FF_\alpha \rightarrow X_\beta$ is an isomorphism.
\end{definition}

\begin{prop}
	\label{prp:homqcaffine}
	If $X_\bullet$ has affine arrows, then for any $\FF_\bullet$ coherent, $\GG_\bullet$ quasi-coherent, $\cHom_{X_\bullet}(\FF_\bullet, \GG_\bullet)$ is quasi-coherent.
	If in addition, $\GG_\bullet$ is coherent, $X_\bullet$ is noetherian, and the arrows are proper, then $\cHom_{X_\bullet}(\FF_\bullet, \GG_\bullet)$ is coherent.
\end{prop}
\begin{proof}
	Enough to show that for each $X_\alpha$, that the sheaf $(\cHom_{X_\bullet}(\FF_\bullet, \GG_\bullet))_\alpha$ is (quasi-)coherent, which can be done locally, and furthermore for each $U \subseteq X_\alpha$, the definition of $\cHom$ only depends on the diagram $X_\bullet / U$ so we can restrict to proving this for a terminal scheme in a diagram, and furthermore restrict that this scheme is affine.
	Because $X_\bullet$ has affine arrows, the entire diagram must be affine.
	
	Now define
	\[
		\EE_{\alpha\beta} = \begin{cases}
								\OO_{X_\beta} & \text{if } \beta \in \alpha / I \\
									0 & \text{otherwise}
							\end{cases}
	\]
	with the maps between nonzero sheaves being the natural $\OO_{X_\beta} \rightarrow X_{\phi *} \OO_{X_\eta}$.
	
	We can directly compute 
	\[
		\cHom(\EE_{\alpha \bullet}, \GG_\bullet)_\beta = \begin{cases}
													\GG_\beta  & \text{if } \beta \in \alpha / I \\
													X_{\phi *} \GG_\alpha & \text{if } \phi : \beta \rightarrow \phi \\
													0 & \text{otherwise}
													\end{cases},
	\]
	so this is quasi-coherent, and if the additional conditions are met, it is coherent.
	
	Each $\FF_\alpha$ is coherent on an affine scheme, so is the cokernel of a map of finite rank free modules, these give sequences, surjective on the $\alpha$ component of the diagram:
	\[
		\EE_{\alpha \bullet}^{\oplus m_\alpha} \rightarrow \EE_{\alpha \bullet}^{\oplus n_\alpha} \rightarrow \FF_\bullet.
	\]
	Combining these gives a $\FF$ as a cokernel:
	\[
		\bigoplus_\alpha \EE_{\alpha \bullet}^{\oplus m_\alpha} \rightarrow \bigoplus_\alpha \EE_{\alpha \bullet}^{\oplus n_\alpha} \rightarrow \FF_\bullet \rightarrow 0.
	\]
	
	Applying $\cHom_{X_\bullet}(-,\GG_\bullet)$,
	\[
		0 \rightarrow \cHom_{X_\bullet}(\FF_\bullet, \GG_\bullet) \rightarrow \cHom_{X_\bullet}(\bigoplus \EE_{\alpha\bullet}, \GG_\bullet) \rightarrow \cHom_{X_\bullet}(\bigoplus \EE_{\alpha\bullet}, \GG_\bullet),
	\]
	and since the direct sums are finite this can be rewritten as
	\[
		0 \rightarrow \cHom_{X_\bullet}(\FF_\bullet, \GG_\bullet) \rightarrow \bigoplus \cHom_{X_\bullet}(\EE_{\alpha\bullet}, \GG_\bullet) \rightarrow \bigoplus \cHom_{X_\bullet}(\EE_{\alpha\bullet}, \GG_\bullet).
	\]
	Now since finite direct sums and kernels of (quasi-)coherent sheaves are (quasi-)coherent, we are done.
\end{proof}

\begin{theorem}
	If $X_\bullet$ is a concentrated $I$-scheme, then if $\FF_\bullet$ is coherent and $\GG_\bullet$ is quasi-coherent, $\cHom_{X_\bullet}(\FF_\bullet, \GG_\bullet)$ is quasi-coherent.
	If in addition $\GG_\bullet$ is coherent, and $X_\bullet$ is noetherian with proper arrows, then $\cHom_{X_\bullet}(\FF_\bullet, \GG_\bullet)$ is coherent.
\end{theorem}
\begin{proof}
	As before, reduce to the case with $X_\bullet$ a diagram with an affine, terminal component $X_0$.
	Then apply lemma \ref{lem:affinecover} to $X_\bullet$ to have an affine diagram cover $\{V_{i\bullet}\}$.
	Each intersection $V_{i \bullet} \cap V_{j \bullet}$ is quasi-compact by quasi-separability, so we can reapply lemma \ref{lem:affinecover} to have affine diagram covers $\{V_{ijk\bullet}\}$.
	
	Have maps $\cHom_{X_\bullet}(\FF_\bullet, \GG_\bullet)_0 \rightarrow \cHom_{V_{i\bullet}}(\FF_\bullet |_{V_{i\bullet}}, \GG_\bullet |_{V_{i \bullet}})_0$ given by restriction, and in fact if we are given $\phi_i \in \cHom_{V_{i\bullet}}(\FF_\bullet |_{V_{i\bullet}}, \GG_\bullet |_{V_{i \bullet}})_0$ for each $i$ such that $\phi_i |_{V_{ijk \bullet}} = \phi_j |_{V_{ijk \bullet}}$ for each $i, j, k$, then the morphisms glue uniquely to give $\psi \in \cHom_{X_\bullet}(\FF_\bullet, \GG_\bullet)_0$.
	
	This establishes the equalizer diagram
	\[
	\begin{tikzcd}
		\cHom_{X_\bullet}(\FF_\bullet, \GG_\bullet)_0 \arrow{r} & \bigoplus_i \cHom_{V_{i\bullet}}(\FF_\bullet |_{V_{i\bullet}}, \GG_\bullet |_{V_{i \bullet}})_0 \arrow[yshift=.5ex]{r} \arrow[yshift=-.5ex]{r} & \bigoplus_{i,j,k} \cHom_{V_{ijk\bullet}}(\FF_\bullet |_{V_{ijk\bullet}}, \GG_\bullet |_{V_{ijk \bullet}})_0
	\end{tikzcd}
	\]
	by proposition \ref{prp:homqcaffine}, the right two terms are (quasi-)coherent, so as is the term on the left.
\end{proof}

\begin{theorem}
	Suppose $\GG_\bullet$ is an $\OO_{X_\bullet}$-module.
	Then the functors $\cHom_{X_\bullet}(\GG_\bullet, -)$ and $-\otimes\GG_\bullet$ are adjoint.
\end{theorem}
\begin{proof}
	Let $\FF_\bullet$ and $\cH_\bullet$ be arbitrary $\OO_{X_\bullet}$-modules, we will describe an isomorphism
	\[
		\Hom(\FF_\bullet, \cHom_{X_\bullet}(\GG_\bullet, \cH_\bullet)) \xrightarrow{\sim} \Hom(\FF_\bullet \otimes \GG_\bullet, \cH_\bullet)
	\]
	Note that if $\FF_\bullet \otimes^p \GG_\bullet$ is the presheaf tensor product, then there is a natural isomorphism $\Hom(\FF_\bullet \otimes \GG_\bullet, \cH_\bullet) \cong \Hom(\FF_\bullet \otimes^p \GG_\bullet, \cH_\bullet)$, so it is enough to show for the presheaf tensor product, and in this case $X_{\phi *} (\FF_\alpha \otimes^p \FF_\beta) \cong X_{\phi *} \FF_\alpha \otimes^p X_{\phi *} \GG_\alpha$, compatible with the arrows of $\FF_\bullet \otimes^p \GG_\bullet$.
	
	Given $\psi \in \Hom(\FF_\bullet, \cHom_{X_\bullet}(\GG_\bullet, \cH_\bullet))$, with restriction to each component $\alpha$ denoted $\psi_\alpha$, define a morphism $\FF_\alpha \otimes^p \GG_\alpha \rightarrow \cH_\alpha$ by $s \otimes t \mapsto \psi_\alpha(s)(t)$.
	It remains to check that these give compatible morphisms, namely to show the following diagram commutes:
	\[
		\begin{tikzcd}
			\FF_\alpha \otimes^p \GG_\alpha \arrow{rr}{s \otimes t \mapsto \psi_\alpha(s)(t)} \arrow{d}{\FF_\phi \otimes \GG_\phi} && \cH_\alpha \arrow{d}{\cH_\phi} \\
			X_{\phi *} \FF_\beta \otimes^p X_{\phi *}\GG_\beta \arrow{rr}{s \otimes t \mapsto \psi_\beta(s)(t)} && X_{\phi *} \cH_\beta.
		\end{tikzcd}
	\]
	Then we must show that for $s \otimes t$ in $\FF_\alpha \otimes^p \GG_\alpha$, $\cH_\phi (\psi_\alpha(s)(t)) = \psi_\beta(\FF_\phi s)(\GG_\phi t)$, or more abstractly that the following diagram commutes:
	\[
		\begin{tikzcd}
		\cHom_{X_\bullet / X_\alpha}(\GG_\bullet, \cH_\bullet)_\alpha \arrow{r} \arrow{dd} & \cHom_{X_\alpha}(\GG_\alpha, \cH_\alpha) \arrow{dr} \\
		& &  \cHom_{X_\alpha} (\GG_\alpha, X_{\phi *} \cH_\beta) \\
		X_{\phi *} \cHom_{X_\bullet / X_\beta}(\GG_\bullet, \cH_\bullet)_\beta \arrow{r} & X_{\phi *} \cHom_{X_\beta} (\GG_\beta, \cH_\beta) \arrow{r} & \cHom_{X_\alpha}(X_{\phi *} \GG_\beta, X_{\phi *} \cH_\beta) \arrow{u}.
		\end{tikzcd}
	\]
	Taking a morphism $\varphi \in \cHom_{X_\bullet / X_\alpha}(\GG_\bullet, \cH_\bullet)_\alpha$, the result of the map to the right is, for each $U \subseteq X_\alpha$, a module homomorphism $\GG_\alpha(U) \rightarrow \cH_\alpha(U)$.
	The result of the composition to the bottom right is, for each $U \subseteq X_\alpha$, a module homomorphism $\GG_\beta(X_\phi^{-1}(U)) \rightarrow \cH_\beta (X_\phi^{-1}(U))$.
	Then they map to the same morphism in $\cHom_{X_\alpha} (\GG_\alpha, X_{\phi *} \cH_\beta)$ by the compatibilities of the original map.
	
	Now given a $\psi \in \Hom(\FF_\bullet \otimes^p \GG_\bullet, \cH_\bullet)$, define for each $U \subseteq X_\alpha$, $s \in \FF_\alpha(U)$, and $\phi : \alpha \rightarrow \beta$, a map $\GG_\alpha(X_\phi^{-1}(U)) \rightarrow \cH_\alpha(X_\phi^{-1}(U))$ by $t \mapsto \psi_\alpha(\FF_\phi(s) \otimes t)$, and further a map on $V \subseteq X_\phi^{-1}(U)$ by restricting $\FF_\phi(s)$.
	This defines an element of $\cHom_{X_\bullet / X_\alpha}(\GG_\bullet, \cH_\bullet)$, as these morphisms are compatible by the compatibility of $\psi$ and $\FF_\phi$.
	
	By careful consideration the two operations described are inverses, so the functors are adjoint.
\end{proof}

\begin{theorem}
	The derived functor $\bR \cHom_{X_\bullet}(-,-)$ takes $D^-(X_\bullet)^{op} \times D^+(X_\bullet)$ to $D^+(X_\bullet)$.
	Furthermore, it takes $D^-_c(X_\bullet)^{op} \times D^+_{qc}(X_\bullet)$ to $D^+_{qc}(X_\bullet)$.
\end{theorem}
\begin{proof}
	For each $F_\bullet \in D^-(X_\bullet)$, $G_\bullet \in D^+(X_\bullet)$, $\bR \cHom_{X_\bullet}(F_\bullet, G_\bullet)$ is defined by replacing $G_\bullet$ with an injective resolution $I_\bullet$, and then taking the total complex of the double complex
	\[
	\begin{tikzcd}
				{}&	\vdots \arrow{d}	&	\vdots \arrow{d} & \\
		\cdots	\arrow{r}	&	\cHom_{X_\bullet}(F^i_\bullet, I^j_\bullet) \arrow{r} \arrow{d}	&	\cHom_{X_\bullet}(F^{i-i}_\bullet, I^j_\bullet) \arrow{d} \arrow{r}	& \cdots \\
		\cdots	\arrow{r}	&	\cHom_{X_\bullet}(F^i_\bullet, I^{j+1}_\bullet) \arrow{r} \arrow{d}	&	\cHom_{X_\bullet}(F^{i-i}_\bullet, I^{j+1}_\bullet) \arrow{d} \arrow{r}	& \cdots \\
				&	\vdots	&	\vdots &
	\end{tikzcd}
	\]
	
	As the diagonals move to the left, eventually each term must be zero by the bounds on the original complexes.
	Furthermore, if each term in $F_\bullet$ is coherent and each term in $G_\bullet$ is quasi-coherent, then $I_\bullet$ can be taken to be a quasi-coherent injective resolution and thus each term in the double complex is quasi-coherent.
\end{proof}

\begin{theorem}
	The derived functor $-\otimesL-$ takes $D(X_\bullet) \times D(X_\bullet)$ to $D(X_\bullet)$.
	Furthermore, it takes $D_{qc}(X_\bullet) \times D_{qc}(X_\bullet)$ to $D_{qc}(X_\bullet)$ and $D_{c}(X_\bullet) \times D_{c}(X_\bullet)$ to $D_{c}(X_\bullet)$.
\end{theorem}
\begin{proof}
	$(F_\bullet \otimesL G_\bullet)_\alpha = F_\alpha \otimesL G_\alpha$.
\end{proof}

\begin{theorem}
	Suppose $G_\bullet \in D(X_\bullet)$.
	Then the functors $\bR \cHom_{X_\bullet}(G_\bullet, -)$ and $-\otimesL G_\bullet$ are adjoint.
\end{theorem}
\begin{proof}
	This is an application tag 09T5 of \cite{stacks}.
\end{proof}

\begin{definition}
	A morphism $f_\bullet : X_\bullet \rightarrow Y_\bullet$ from a $\Box_n \times I$-scheme $X_\bullet$ to an $I$-scheme $Y_\bullet$ over the functor projecting to $I$ is called a \textit{cubical morphism}.
\end{definition}

\begin{theorem}
	\label{thm:pushforwardbounds}
	Let $f_\bullet : X_\bullet \rightarrow Y_\bullet$ be a concentrated, cubical morphism.
	Then $\bR f_{\bullet *} : D(X_\bullet) \rightarrow D(X_\bullet)$ maps $D_{qc}(X_\bullet)$ to $D_{qc}(X_\bullet)$, $D^-(X_\bullet)$ to $D^-(X_\bullet)$, and if $f_\bullet$ is a proper morphism of noetherian schemes, $D_c(X_\bullet)$ to $D_c(X_\bullet)$.
	Furthermore the right adjoint to $\bR f_{\bullet *}$ on $D_{qc}(X_\bullet)$, $f_\bullet^!$ maps $D_{qc}^+(X_\bullet)$ to $D_{qc}^+(X_\bullet)$.
\end{theorem}
\begin{proof}
	The derived limit on each component preserves (quasi-)coherence and is bounded above, so by the staggered complex construction, the derived limit of the total pushforward on each component $Y_\alpha$ also has these properties.
	Then the adjoint is bounded below by Lemma 4.1.8 of \cite{Lipman2009}.
\end{proof}

\section{Projection Formula/Duality}

\begin{theorem}
	Let $f_\bullet : X_\bullet \rightarrow Y_\bullet$ be a proper morphism of noetherian diagrams of schemes.
	Suppose that for $F_\bullet \in D_{c}^-(X_\bullet)$, the projection formula natural transformation of functors $D_{qc}(Y_\bullet) \rightarrow D_{qc}(Y_\bullet)$
	\[
		- \otimesL \bR f_{\bullet *} F_\bullet \rightarrow \bR f_{\bullet *}(\bL f_\bullet^* - \otimesL F_\bullet)
	\]
	is an isomorphism.
	Then the Grothendieck duality natural transformation of functors $D_{qc}^+(Y_\bullet) \rightarrow D_{qc}^+(Y_\bullet)$
	\[
		\bR f_{\bullet *} \bR \cHom_{X_\bullet} (F_\bullet, f_\bullet^! -) \rightarrow \bR \cHom_{Y_\bullet} (\bR f_{\bullet *} F_\bullet, -)
	\]
	is an isomorphism.
\end{theorem}
\begin{proof}
	By theorem \ref{thm:pushforwardbounds}, $\bR f_{\bullet *}$ maps $D^-_{c}(X_\bullet)$ to $D_c^-(X_\bullet)$.
	Thus each of these is well-defined as functors to the indicated categories.
	
	Next we note that if $E_\bullet \in D_{qc}(X_\bullet)$, then for any $G_\bullet \in D_{qc}^+(X_\bullet)$, the two transformations are conjugate and fit into the diagram
	\[
	\begin{tikzcd}
		\Hom(\bR f_{\bullet *}(\bL f_\bullet^* E_\bullet \otimesL F_\bullet), G_\bullet) \arrow{d}[sloped, above]{\sim} \arrow{r} & \Hom(E_\bullet \otimesL \bR f_{\bullet *} F_\bullet, G_\bullet) \arrow{d}[sloped, above]{\sim} \\
		\Hom(E_\bullet, \bR f_{\bullet *} \bR \cHom_{X_\bullet} (F_\bullet, f_\bullet^! G_\bullet) \arrow{r} & \Hom(E_\bullet, \bR \cHom_{Y_\bullet} (\bR f_{\bullet *} F_\bullet, G_\bullet)).
	\end{tikzcd}
	\]
	By hypothesis, the top arrow is an isomorphism, so as is the bottom arrow.
	Then by Yoneda's lemma, the Grothendieck duality transformation is an isomorphism.
\end{proof}

\begin{theorem}
	\label{thm:flatbasechange}
	Let $u_\bullet : U_\bullet \rightarrow X_\bullet$ and $f_\bullet : Y_\bullet \rightarrow X_\bullet$ be morphisms of diagrams of schemes, and $V_\bullet = U_\bullet \times_{X_\bullet} Y_\bullet$, with projections $g_\bullet$ to $U_\bullet$ and $v_\bullet$ to $Y_\bullet$.
	Then the natural transformation of functors $D_{qc}(Y_\bullet) \rightarrow D_{qc}(U_\bullet)$
	\[
		\bL u_\bullet^* \bR f_{\bullet *} \rightarrow \bR g_{\bullet *} \bL v_\bullet^*,
	\]
	and if $u_\bullet$ is flat and $f_\bullet$ is cubical, this is an isomorphism.
\end{theorem}
\begin{proof}
	The natural map is the composition
	\begin{align*}
		\bL u_\bullet^* \bR f_{\bullet *} &\rightarrow \bR g_{\bullet *} \bL g_\bullet^* \bL u_\bullet^* \bR f_{\bullet *} \\
		&\rightarrow \bR g_{\bullet *} \bL v_\bullet^* \bL f_\bullet^* \bR f_{\bullet *} \\
		&\rightarrow \bR g_{\bullet *} \bL v_\bullet^*.
	\end{align*}
	
	Now suppose $F_\bullet \in D_{qc}(Y_\bullet)$ and $u_\bullet$ is a functor over $\Phi : I \rightarrow J$.
	Then for each $\alpha \in I$, by definition,
	\[
		(\bR g_{\bullet *} \bL v_\bullet^* F_\bullet)_\alpha = \bR \varprojlim_{\beta \in \Box_n} \bR g_{(\alpha, \beta) *} \bL v_{(\alpha, \beta)}^* F_\beta,
	\]
	then by usual flat base change for schemes, this becomes
	\[
		 \bR \varprojlim_{\beta \in \Box_n} \bL u_{\alpha}^*  \bR f_{\beta *} F_\beta.
	\]
	By definition,
	\[
		(\bL u_\bullet^* \bR f_{\bullet *} F_\bullet)_\alpha = \bL u_\alpha^* \bR \varprojlim_{\beta \in \Box_n} \bR f_{\beta *} F_\beta,
	\]
	so we have reduced to showing that for a flat morphism of schemes $u : U \rightarrow X$, a $\Box_n$-diagram of complexes $F_\bullet$ on $X$, $\bL u^* \bR \varprojlim F_\bullet = \bR \varprojlim \bL u^*$.
	
	By flatness, $\bL u^* = u^*$, and by using the staggered complex construction $\bR \varprojlim F_\bullet$ becomes a complex with each degree the direct sum of $F_\alpha^p$s and differential maps the direct sum of maps $F_\alpha \rightarrow F_\beta$.
	Since $u^*$ commutes with all of these, $u^* \bR \varprojlim F_\bullet$ is in fact the staggered complex of $u^* F_\bullet$.
\end{proof}

\begin{theorem}
	Let $f_\bullet : X_\bullet \rightarrow Y_\bullet$ be a cubical morphism.
	Then for each $F_\bullet \in D_{qc}(X_\bullet)$, the projection formula natural transformation of functors on $D_{qc}(X_\bullet)$
	\[
	- \otimesL \bR f_{\bullet *} F_\bullet \rightarrow \bR f_{\bullet *}(\bL f_\bullet^* - \otimesL F_\bullet)
	\]
	is an isomorphism.
\end{theorem}
\begin{proof}	
	It is enough to show this over each component of $Y_\bullet$, and $\bR f_{\bullet *}$ is computed independently on each component of $Y$ via the stratification of $f_\bullet$, so we can assume $Y$ is a scheme, and $f_\bullet : X_\bullet \rightarrow Y$
	
	Then this morphism is local in $Y$ using theorem \ref{thm:flatbasechange}, so we can reduce to the case where $Y$ is affine.
	Here, $\OO_Y$ is ample and generates the category $D_{qc}(Y)$, and since each functor is triangulated from $D_{qc}(Y)$ to $D_{qc}(Y)$, and preserves coproducts, it is in fact enough to show just for $\OO_Y$, where it is trivial.
\end{proof}

\begin{cor}
	\label{cor:cubicalgrothdual}
	If $f_\bullet : X_\bullet \rightarrow Y_\bullet$ is a cubical, projective morphism of noetherian diagrams of schemes, then for any $F_\bullet \in D_{c}^-(X_\bullet)$, $G_\bullet \in D_{qc}^+(X_\bullet)$, the Grothendieck duality map is an isomorphism:
	\[
		\bR f_{\bullet *} \bR \cHom(F_\bullet, f_\bullet^! G_\bullet) \xrightarrow{\sim} \bR \cHom(\bR f_{\bullet *} F_\bullet, G_\bullet).
	\]
	Furthermore,
	\[
		\bR f_{\bullet *} \bR \cHom(F_\bullet, \omega_{X_\bullet}^\bullet) \xrightarrow{\sim} \bR \cHom(\bR f_{\bullet *} F_\bullet, \omega_{Y_\bullet}^\bullet).
	\]
\end{cor}

\begin{example}
	Let $X$ be a scheme, and $Y_\bullet$ be the diagram $X \rightarrow X$ with the identity map (for convenience, labeled $X_1 \rightarrow X_2$).
	Then we have a morphism of diagrams $f_\bullet$ as follows:
	\[
	\begin{tikzcd}
		X \arrow{r}{\id} & X_1 \arrow{d}{\id} \\
		& X_2.
	\end{tikzcd}
	\]
	
	We will construct a counterexample to the projection formula and Grothendieck duality for this morphism of diagrams.
	Let $\FF_\bullet$ be the sheaf over $Y_\bullet$ which is 0 on $X_1$ and $\OO_{X_2}$ on $X_2$.
	Now consider the natural morphism
	\[
		\bR f_{\bullet *} (\bL f_\bullet^* \FF_\bullet) \rightarrow \FF_\bullet \otimes \bR f_{\bullet *} \OO_X
	\]
	
	Using the definition of the pushforward, $(\bR f_{\bullet *} \OO_X)_1 = \bR \varinjlim \OO_{X_1} = \OO_{X_1}$ and $(\bR f_{\bullet *} \OO_X)_2 = \bR \varinjlim \OO_{X_2} = \OO_{X_2}$, so the right side is $\FF_\bullet$.
	On the other hand, $\bL f_\bullet^* \FF_\bullet = \bL \id^* 0 = 0$ so the left side is 0 and this is not a natural isomorphism.
	
	Then we can do the same for the Grothendieck duality map
	\[
		\bR f_{\bullet *} \bR \cHom(\OO_X, f_\bullet^! \FF_\bullet) \rightarrow \bR \cHom(\bR f_{\bullet *} \OO_X , \FF_\bullet):
	\]
	by the previous computation this is morphism $\bR f_{\bullet *} f_\bullet^! \FF_\bullet \rightarrow \FF_\bullet$, and the right hand side gives the same sheaf when restricted to either $X_1$ or $X_2$, while $\FF_\bullet$ is not the same on each.
\end{example}

\begin{cor}
	Let $X$ be a reduced scheme, finite-type over $\CC$, and let $f_\bullet : X_\bullet \rightarrow X$ be a cubic hyperresolution.
	Then $X$ has Du Bois singularities if and only if the natural map
	\[
		\bR f_{\bullet *} \omega^\bullet_{X_\bullet} \xrightarrow{\sim} \omega^\bullet_X
	\]
	is a quasi-isomorphism.
\end{cor}
\begin{proof}
	Suppose $X$ has Du Bois singularities, so that the natural map
	\[
		\OO_X \xrightarrow{\sim} \bR f_{\bullet *} \OO_{X_\bullet}
	\]
	is a quasi-isomorphism.
	Then applying the functor $\bR \cHom(-,\omega_X^\bullet)$, and using corollary \ref{cor:cubicalgrothdual},
	\begin{align*}
		\omega_X^\bullet &\xleftarrow{\sim} \bR \cHom(\bR f_{\bullet *} \OO_{X_\bullet}, \omega_X^\bullet) \\
		&\xleftarrow{\sim} \bR f_{\bullet *} \bR \cHom(\OO_{X_\bullet}, \omega_{X_\bullet}^\bullet) \\
		&\xleftarrow{\sim} \bR f_{\bullet *} \omega_{X_\bullet}^\bullet
	\end{align*}
	
	Now assume this map is an isomorphism.
	Applying the same functor and using the fact that $\omega_X^\bullet$ is dualizing,
	\begin{align*}
		\bR \cHom(\omega_X^\bullet, \omega_X^\bullet) &\xrightarrow{\sim} \bR \cHom(\bR f_{\bullet *} \omega_{X_\bullet}^\bullet, \omega_X^\bullet) \\
		&\xrightarrow{\sim} \bR \cHom(\bR f_{\bullet *} \bR \cHom(\OO_{X_\bullet}, \omega_{X_\bullet}^\bullet), \omega_{X}^\bullet) \\
		&\xrightarrow{\sim} \bR \cHom(\bR \cHom(\bR f_{\bullet *} \OO_{X_\bullet}, \omega_X^\bullet), \omega_X^\bullet) \\
		\OO_X &\xrightarrow{\sim} \bR f_{\bullet *} \OO_{X_\bullet}
	\end{align*}
\end{proof}

\section{Relative Differentials}

\begin{definition}
	Let $f_\bullet : X_\bullet \rightarrow Y_\bullet$ be a morphism of diagrams of schemes over the functor $\Phi : I \rightarrow J$.
	Then define a sheaf $\Omega_{X_\bullet / Y_\bullet}$ on the diagram $X_\bullet$ as follows: for each $\alpha \in I$,
	\[
		(\Omega_{X_\bullet / Y_\bullet})_\alpha = \Omega_{X_\alpha / Y_{\Phi(\alpha)}}
	\]
	and for each $X_\alpha \rightarrow X_\beta$, the map $\phi_{\alpha \beta}^* (\Omega_{X_\bullet / Y_\bullet})_\beta \rightarrow (\Omega_{X_\bullet / Y_\bullet})_\alpha$ is given by
	\[
		\phi_{\alpha \beta}^* \Omega_{X_\beta / Y_{\Phi(\beta)}} \xrightarrow{\sim} p^* \Omega_{X_\beta \times_{Y_{\Phi(\beta)}} Y_{\Phi(\alpha)} / Y_{\Phi(\alpha)}} \rightarrow \Omega_{X_\alpha / Y_{\Phi(\alpha)}}
	\]
	
	This defines a sheaf over the diagram since for any $X_\alpha \rightarrow X_\beta \rightarrow X_\delta$, the diagram
	\[
		\begin{tikzcd}
			X_\alpha \arrow{rr} \arrow{dr} & & Y_{\Phi(\alpha)} \times_{Y_{\Phi(\delta)}} X_\delta \\
			& Y_{\Phi(\alpha)} \times_{Y_{\Phi(\beta)}} X_\beta \arrow{ur} & {}
		\end{tikzcd}
	\]
	commutes.
\end{definition}

\begin{theorem}
	\label{thm:locfreereldiffs}
	Let $f : X \rightarrow B$ be a smooth morphism from a smooth scheme $X$ to a smooth, 1-dimensional scheme $B$.
	Then for each $p$ there is a finite locally-free resolution of $\Omega_{X/B}^p$ given by
	\[
		\cdots \rightarrow f^* \omega_B^{\otimes 2} \otimes \Omega_X^{p-2} \rightarrow f^* \omega_B \otimes \Omega_X^{p-1} \rightarrow
			\Omega^p_X \rightarrow \Omega_{X/B}^p \rightarrow 0
	\]
\end{theorem}
\begin{proof}
	First note there is always a right exact sequence
	\[
		f^* \omega_B \otimes \Omega_X^{p-1} \rightarrow \Omega_X^p \otimes \Omega_{X/B}^p \rightarrow 0
	\]
	by tag 00DO of \cite{stacks}, and when $B$ is 1-dimensional, there is an exact sequence
	\[
		0 \rightarrow f^* \omega_B \otimes \Omega_{X/B}^{p-1} \rightarrow \Omega_X^p \rightarrow \Omega_{X/B}^p \rightarrow 0.
	\]
	The image of the left map in the first exact sequence is then  $f^* \omega_B \otimes \Omega_{X/B}^{p-1}$ and we can apply the first sequence for $p-1$ and tensored with $f^* \omega_B$ to extend the first sequence to 
	\[
	f^* \omega_B^{\otimes 2} \otimes \Omega_X^{p-2} \rightarrow f^* \omega_B \otimes \Omega_X^{p-1} \rightarrow
	\Omega^p_X \rightarrow \Omega_{X/B}^p \rightarrow 0
	\]
	while remaining exact.
	By continuing in this manner using these two exact sequences tensored with $f^* \omega_B$ an appropriate number of times (note this is flat), we get the exact sequence as desired.
\end{proof}

\begin{definition}
	Let $f : X \rightarrow B$ be a morphism from any scheme $X$ to a smooth scheme $B$ over a field of characteristic 0.
	For a cubical hyperresolution $\pi_\bullet : X_\bullet \rightarrow X$ and nonnegative integer $p$, we can define
	\[
		\DB_{X/B}^p = \bR \pi_{\bullet *} \Omega_{X_\bullet / B}^p.
	\]
	Note that a priori this is not independent of choice of hyperresolution.
\end{definition}

\begin{prop}
	Let $f : X \rightarrow B$ be a morphism from a noetherian scheme $X$ to a smooth, 1-dimensional scheme $B$ over a field of characteristic 0.
	Then for any cubical hyperresolution, there is a spectral sequence computing the homology of $\DB_{X/B}^p$:
	\[
		E_1^{ij} = f^* \omega_B^{\otimes (p - j)} \otimes h^i(\DB_X^j) \Rightarrow h^{i+j}(\DB_{X/B}^p).
	\]
	
	Thus the homology of $\DB_{X/B}^p$ is independent of choice of hyperresolution.
\end{prop}
\begin{proof}
	Let $f_\bullet = f \circ \pi_\bullet$.
	Applying remark 2.67 of \cite{Huybrechts2006}, we have the spectral sequence
	\[
		E_1^{ij} = \bR^i \pi_{\bullet *} (f_\bullet^* \omega_B^{\otimes(p-j)} \otimes \Omega_{X_\bullet}^j) \Rightarrow \bR^{i+j} \pi_{\bullet *} \Omega_{X/B}^p
	\]
	
	To finish this, apply some definitions and the projection formula:
	\begin{align*}
		\bR^i \pi_{\bullet *} (f_\bullet^* \omega_B^{\otimes(p-j)} \otimes \Omega_{X_\bullet}^j) &= h^i (\bR \pi_{\bullet *} (\pi_\bullet^* f^* \omega_B^{\otimes(p-j)} \otimes \Omega_{X_\bullet}^j)) \\
		&= h^i (f^* \omega_B^{\otimes(p-j)} \otimes \bR \pi_{\bullet *}\Omega_{X_\bullet}^j) \\
		&= f^* \omega_B^{\otimes (p - j)} \otimes h^i(\DB_X^j).
	\end{align*}
	
	The last claim is due to the independence of $\DB_X^j$.
\end{proof}

\bibliography{../library}{}
\bibliographystyle{plain}
\end{document}